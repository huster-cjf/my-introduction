<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>课程成绩示例</title>
  <style>
    .mainContainer {
      width: 1280px;
      margin: 0 auto;
    }
    h1 {
      text-align: center;
    }
    table {
      margin: 0 auto;
      border-collapse: collapse;
      border-style: solid;
      border-left: 0px;
      border-right: 0px;
    }
    th {
      border-style: solid;
      border-left: 0px;
      border-right: 0px;
      padding: 5px 10px;
    }
    td {
      text-align: center;
    }
    input {
      text-align: center;
    }
    #result {
      width: fit-content;
      margin: 0 auto;
    }
  </style>
</head>
<body>
  <div class="mainContainer">
    <h1>张三的成绩单</h1>
    <table>
      <tr>
        <th>课程</th>
        <th>学时</th>
        <th>成绩</th>
        <th>编辑</th>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td><input type="text" value="class1"/></td>
        <td><input class="hours" type="number"/></td>
        <td><input class="score" type="number"/></td>
        <td><input type="button" value="+" onclick="addLine()"/> <input type="button" value="-" onclick="delLine(this)"/></td>
      </tr>
      <!-- <tr>
        <td><input type="text" value="class1"/></td>
        <td><input class="hours" type="number" value="32"/></td>
        <td><input class="score" type="number" value="80"/></td>
        <td><input type="button" value="+" onclick="addLine()"/> <input type="button" value="-" onclick="delLine(this)"/></td>
      </tr>
      <tr>
        <td><input type="text" value="class2"/></td>
        <td><input class="hours" type="number" value="40"/></td>
        <td><input class="score" type="number" value="90"/></td>
        <td><input type="button" value="+" onclick="addLine()"/> <input type="button" value="-" onclick="delLine(this)"/></td>
      </tr>
      <tr>
        <td><input type="text" value="class3"/></td>
        <td><input class="hours" type="number" value="60"/></td>
        <td><input class="score" type="number" value="85"/></td>
        <td><input type="button" value="+" onclick="addLine()"/> <input type="button" value="-" onclick="delLine(this)"/></td>
      </tr> -->
    </table>
    <div id="result">
      <input type="button" value="计算加权平均分" onclick="calc()" /> 
      <span id = "GPA"></span>
    </div> 
  </div>
  <script>
    onload:calc();
    function calc() {
      var allHours = document.querySelectorAll(".hours");
      var allScores = document.querySelectorAll(".score");
      var gpaText = document.querySelector("#GPA");

      var gpa = 0;
      var hours = 0;

      for(i = 0; i< allHours.length; i++){
        gpa += allHours[i].value * allScores[i].value;
        hours += parseInt(allHours[i].value, 10);
      }

      gpaText.innerText = "加权平均分：" + (gpa/hours).toFixed(2);
    }

    function addLine() {
      var newTr = document.createElement("tr");
      newTr.innerHTML += '<td><input type="text" value="class"/></td><td><input class="hours" type="number" value="60"/></td><td><input class="score" type="number" value="85"/></td>    <td><input type="button" value="+" onclick="addLine()"/> <input type="button" value="-" onclick="delLine(this)"/></td>';
      document.querySelector("table").appendChild(newTr);
      // document.querySelector("table").innerHTML += '<tr><td><input type="text" value="class"/></td><td><input class="hours" type="number" value="60"/></td><td><input class="score" type="number" value="85"/></td>    <td><input type="button" value="+" onclick="addLine()"/> <input type="button" value="-" onclick="delLine(this)"/></td></tr>';
      // document.querySelector("table").append('<tr><td><input type="text" value="class"/></td><td><input class="hours" type="number" value="60"/></td><td><input class="score" type="number" value="85"/></td><td><input type="button" value="+" onclick="addLine()"/> <input type="button" value="-" onclick="delLine(this)"/></td></tr>');
      calc();
    }

    function delLine(obj) {
      if(document.querySelectorAll(".hours").length > 1){
        obj.parentElement.parentElement.remove();
        calc();
      }
    }
  </script>
</body>
</html>